@page "/customer-accounts-nested"
@inject HttpClient Http
@using BankBlazor.Client.Models


<h3>Customers with Accounts</h3>

@if (customers == null)
{
    <p><em>Loading...</em></p>
}
else
{
    @foreach (var customer in customers)
    {
        <h5>@customer.FullName</h5>
        <ul>
            @foreach (var acc in customer.Accounts)
            {
                <li>Account ID: @acc.AccountId — Balance: @acc.Balance</li>
            }
        </ul>
    }
}

@code {
    List<CustomerAccountInfoDto>? customers;

    protected override async Task OnInitializedAsync()
    {
        customers = await Http.GetFromJsonAsync<List<CustomerAccountInfoDto>>("api/customers"); // Adjust endpoint if different
    }
}
